webpackJsonp([1],{"07ZH":function(t,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=a("unWt"),n=a("b8iQ"),r=a("gbRG"),i=window.ePub,s={data:function(){return{reader:null,title:"Acerkaio 的书架",books:[{id:"1",name:"呵呵哒",author:"陈建行",content:"123"},{id:"2",name:"致我们即将逝去的青春",author:"陈建行",content:"123"}],page:{menu:[{type:"icon",icon:"add",click:this.add,title:"添加本地书籍"},{type:"icon",icon:"cloud_download",click:this.addLink,title:"添加云端书籍"},{type:"icon",icon:"apps",href:"https://blog.acerkaio.top/",target:"_blank",title:"Acerkaio"}]}}},mounted:function(){this.init()},destroyed:function(){},methods:{add:function(){document.getElementById("file").click()},init:function(){var t=this;this.reader=n.a,console.log("初始化"),e.a.init(function(){e.a.getBooks(function(o){console.log("获取所有书籍"),console.log(o),t.books=o,t.$storage.get("init",!1)||(t.$storage.set("init",!0),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/01安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/02安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/03安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/04安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/05安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/06安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/07安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/08安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/09安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/安达与岛村/10安达与岛村.epub"),t.addBookFromUrl("https://data.acerkaio.top/%E5%AE%89%E8%BE%BE%E4%B8%8E%E5%B2%9B%E6%9D%91/%E7%9F%AD%E7%AF%87%20%E5%AE%89%E8%BE%BE%E4%B8%8E%E5%B2%9B%E6%9D%91.epub"),t.addBookFromUrl("https://data.acerkaio.top/转生王和天才千金的魔法革命/01转生王和天才千金的魔法革命.epub"),t.addBookFromUrl("https://data.acerkaio.top/转生王和天才千金的魔法革命/02转生王和天才千金的魔法革命.epub"),t.addBookFromUrl("https://data.acerkaio.top/转生王和天才千金的魔法革命/03转生王和天才千金的魔法革命.epub"),t.addBookFromUrl("https://data.acerkaio.top/转生王和天才千金的魔法革命/04转生王和天才千金的魔法革命.epub"),t.addBookFromUrl("https://data.acerkaio.top/转生王和天才千金的魔法革命/05转生公主与天才千金的魔法革命.epub"),t.addBookFromUrl("https://data.acerkaio.top/%E8%BD%AC%E7%94%9F%E7%8E%8B%E5%92%8C%E5%A4%A9%E6%89%8D%E5%8D%83%E9%87%91%E7%9A%84%E9%AD%94%E6%B3%95%E9%9D%A9%E5%91%BD/-%E7%AF%87%20%E8%BD%AC%E7%94%9F%E7%8E%8B%E5%92%8C%E5%A4%A9%E6%89%8D%E5%8D%83%E9%87%91%E7%9A%84%E9%AD%94%E6%B3%95%E9%9D%A9%E5%91%BD.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 01-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 02-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 03-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 04-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 05-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 06-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 07-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 08-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 09-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 10-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 11-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 12-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 13-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 14-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 15-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 16-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 17-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 18-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 19-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 - 20-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 短篇 - 01-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔女之旅 番外 - 01-tc.epub"),t.addBookFromUrl("https://data.acerkaio.top/maj/魔之旅 - 20.epub"))})})},addLink:function(){var t=prompt("请输入链接");console.log(t),this.addBookFromUrl(t)},addBookFromUrl:function(t){var o=this;this.book=i(t,{width:400,height:600,spreads:!1,restore:!0}),this.book.getMetadata().then(function(a){console.log("getMetadata"),console.log(a),e.a.init(function(){e.a.addBook({type:"link",id:""+(new Date).getTime(),name:a.bookTitle,author:a.creator,content:t},function(){e.a.getBooks(function(t){console.log("获取所有书籍"),o.books=t,console.log(t)})})})})},remove:function(t){var o=this;e.a.init(function(){e.a.deleteBook(t.id,function(t){e.a.getBooks(function(t){console.log("获取所有书籍"),console.log(t),o.books=t})})})},download:function(t){var o=t.content;if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(o,"dl.epub");else{var a=document.createElement("a");a.href=window.URL.createObjectURL(o),a.download="dl.epub",a.click(),window.URL.revokeObjectURL(a.href)}},fileChange:function(t){var o=this;if(t.target.files.length){var a=t.target.files[0];console.log(a.name);var n=new FileReader;n.onload=function(t){var a=t.target.result;o.book=i({bookPath:a,restore:!1}),o.book.getMetadata().then(function(t){o.meta=t,console.log("getMetadata"),console.log(t),Object(r.a)(o.book,function(n){console.log("首页封面"),console.log(n),e.a.init(function(){e.a.addBook({id:""+(new Date).getTime(),name:t.bookTitle,author:t.creator,content:a,cover:n},function(){e.a.getBooks(function(t){console.log("获取所有书籍"),o.books=t,console.log(t)})})})})})},n.readAsArrayBuffer(a)}}}},d={render:function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("my-page",{staticClass:"page-home",attrs:{title:t.title,page:t.page}},[a("div",{attrs:{id:"main"}},[a("ul",{staticClass:"book-list"},t._l(t.books,function(o){return a("li",{staticClass:"item"},[a("router-link",{staticClass:"link",attrs:{to:"/books/"+o.id,title:o.name}},[o.cover?a("img",{staticClass:"cover",attrs:{src:o.cover}}):t._e(),t._v(" "),o.cover?t._e():a("div",{staticClass:"cover-text"},[t._v("没有封面")])]),t._v(" "),a("div",{staticClass:"name"},[t._v(t._s(o.name))]),t._v(" "),a("a",{staticClass:"remove",attrs:{href:"#"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.remove(o)}}},[t._v("删除")])],1)}),0),t._v(" "),t.books.length?t._e():a("div",{staticClass:"empty-box"},[a("img",{attrs:{src:"/static/img/empty.svg"}}),t._v(" "),a("div",{staticClass:"text"},[t._v("暂无书籍，你可以添加右上角的“+”添加书籍")])]),t._v(" "),a("ui-raised-button",{staticClass:"file-btn",staticStyle:{display:"none"},attrs:{label:"从文件中导入"}},[a("input",{staticClass:"ui-file-button",attrs:{type:"file",id:"file"},on:{change:function(o){return t.fileChange(o,1)}}})])],1)])},staticRenderFns:[]};var c=a("VU/8")(s,d,!1,function(t){a("9H7m")},"data-v-8667a67a",null);o.default=c.exports},"9H7m":function(t,o,a){var e=a("jUbA");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a("rjj0")("03b2ad61",e,!0,{})},"9bBU":function(t,o,a){a("mClu");var e=a("FeBl").Object;t.exports=function(t,o,a){return e.defineProperty(t,o,a)}},C4MV:function(t,o,a){t.exports={default:a("9bBU"),__esModule:!0}},Zrlr:function(t,o,a){"use strict";o.__esModule=!0,o.default=function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}},b8iQ:function(t,o,a){"use strict";var e=a("Zrlr"),n=a.n(e);o.a=function t(){n()(this,t)}},gbRG:function(t,o,a){"use strict";function e(t,o){t.coverUrl().then(function(t){var a=new XMLHttpRequest;a.responseType="blob",a.onload=function(){var t=a.response,e=new FileReader;e.onload=function(){o&&o(e.result)},e.readAsDataURL(t)},a.open("GET",t),a.send()})}a.d(o,"a",function(){return e})},jUbA:function(t,o,a){(t.exports=a("FZ+f")(!0)).push([t.i,"\n@-webkit-keyframes rotate-data-v-8667a67a {\nto {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n@keyframes rotate-data-v-8667a67a {\nto {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n.book-list[data-v-8667a67a]:after {\n  clear: both;\n  content: '.';\n  display: block;\n  height: 0;\n  line-height: 0;\n  overflow: hidden;\n}\n.book-list .item[data-v-8667a67a] {\n  position: relative;\n  float: left;\n  width: 140px;\n  height: 196px;\n  margin-right: 16px;\n  margin-bottom: 76px;\n  background-color: #fff;\n  /*background-image: url(\"/static/img/bg_1.jpg\");*/\n  -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\n          box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\n}\n.book-list .link[data-v-8667a67a] {\n  display: block;\n  height: 100%;\n  margin-bottom: 16px;\n  color: inherit;\n}\n.book-list .cover[data-v-8667a67a] {\n  max-width: 100%;\n}\n.book-list .cover-text[data-v-8667a67a] {\n  line-height: 196px;\n  text-align: center;\n  color: #999;\n}\n.book-list .author[data-v-8667a67a] {\n  position: absolute;\n  bottom: 16px;\n  left: 16px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.book-list .remove[data-v-8667a67a] {\n  display: none;\n}\n.empty-box[data-v-8667a67a] {\n  width: 480px;\n  margin: 80px auto;\n  padding: 32px;\n  text-align: center;\n  background-color: #fff;\n  -webkit-box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\n          box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\n}\n.empty-box img[data-v-8667a67a] {\n    margin-bottom: 16px;\n    width: 100px;\n    -webkit-animation: rotate-data-v-8667a67a 5s infinite linear;\n            animation: rotate-data-v-8667a67a 5s infinite linear;\n}\n.empty-box .text[data-v-8667a67a] {\n    color: #999;\n}\n","",{version:3,sources:["/home/acerkaio/桌面/书架/epub-front/src/views/Book.vue"],names:[],mappings:";AACA;AACA;IACI,kCAAkC;YAC1B,0BAA0B;CACrC;CACA;AACD;AACA;IACI,kCAAkC;YAC1B,0BAA0B;CACrC;CACA;AACD;EACE,YAAY;EACZ,aAAa;EACb,eAAe;EACf,UAAU;EACV,eAAe;EACf,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,oBAAoB;EACpB,uBAAuB;EACvB,kDAAkD;EAClD,yFAAyF;UACjF,iFAAiF;CAC1F;AACD;EACE,eAAe;EACf,aAAa;EACb,oBAAoB;EACpB,eAAe;CAChB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,mBAAmB;EACnB,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,mBAAmB;EACnB,aAAa;EACb,WAAW;EACX,oBAAoB;EACpB,iBAAiB;EACjB,wBAAwB;CACzB;AACD;EACE,cAAc;CACf;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,sDAAsD;UAC9C,8CAA8C;CACvD;AACD;IACI,oBAAoB;IACpB,aAAa;IACb,6DAA6D;YACrD,qDAAqD;CAChE;AACD;IACI,YAAY;CACf",file:"Book.vue",sourcesContent:["\n@-webkit-keyframes rotate-data-v-8667a67a {\nto {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n@keyframes rotate-data-v-8667a67a {\nto {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n}\n}\n.book-list[data-v-8667a67a]:after {\n  clear: both;\n  content: '.';\n  display: block;\n  height: 0;\n  line-height: 0;\n  overflow: hidden;\n}\n.book-list .item[data-v-8667a67a] {\n  position: relative;\n  float: left;\n  width: 140px;\n  height: 196px;\n  margin-right: 16px;\n  margin-bottom: 76px;\n  background-color: #fff;\n  /*background-image: url(\"/static/img/bg_1.jpg\");*/\n  -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\n          box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\n}\n.book-list .link[data-v-8667a67a] {\n  display: block;\n  height: 100%;\n  margin-bottom: 16px;\n  color: inherit;\n}\n.book-list .cover[data-v-8667a67a] {\n  max-width: 100%;\n}\n.book-list .cover-text[data-v-8667a67a] {\n  line-height: 196px;\n  text-align: center;\n  color: #999;\n}\n.book-list .author[data-v-8667a67a] {\n  position: absolute;\n  bottom: 16px;\n  left: 16px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.book-list .remove[data-v-8667a67a] {\n  display: none;\n}\n.empty-box[data-v-8667a67a] {\n  width: 480px;\n  margin: 80px auto;\n  padding: 32px;\n  text-align: center;\n  background-color: #fff;\n  -webkit-box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\n          box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\n}\n.empty-box img[data-v-8667a67a] {\n    margin-bottom: 16px;\n    width: 100px;\n    -webkit-animation: rotate-data-v-8667a67a 5s infinite linear;\n            animation: rotate-data-v-8667a67a 5s infinite linear;\n}\n.empty-box .text[data-v-8667a67a] {\n    color: #999;\n}\n"],sourceRoot:""}])},mClu:function(t,o,a){var e=a("kM2E");e(e.S+e.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},unWt:function(t,o,a){"use strict";var e=a("Zrlr"),n=a.n(e),r=a("wxAW"),i=a.n(r),s=void 0,d=new(function(){function t(){n()(this,t),this.DB_NAME="dbName",this.OBJECT="Book"}return i()(t,[{key:"init",value:function(t){var o=this,a=indexedDB.open("dbName3",1);a.onerror=function(t){console.log("连接数据库失败")},a.onsuccess=function(t){console.log("连接数据库成功")},a.onupgradeneeded=function(t){t.target.result.createObjectStore(o.OBJECT,{keyPath:"id",autoIncrement:!1}),console.log("创建对象仓库成功")},a.onsuccess=function(a){var e=a.target.result.transaction(o.OBJECT,"readwrite");s=e.objectStore(o.OBJECT),t&&t()}}},{key:"init2",value:function(){s.put({id:"2",userName:"asd",age:24});s.get("2").onsuccess=function(){},s.delete("2").onsuccess=function(){console.log("删除数据成功")}}},{key:"getBooks",value:function(t){var o=[];s.openCursor().onsuccess=function(a){var e=a.target.result;e?(o.push(e.value),e.continue()):t&&t(o)}}},{key:"getBook",value:function(t,o){s.get(t).onsuccess=function(t){console.log("getBook"),o&&o(t.target.result)}}},{key:"addBook",value:function(t,o){s.put(t).onsuccess=function(){console.log("保存成功"),o&&o()}}},{key:"deleteBook",value:function(t,o){s.delete(t).onsuccess=function(){console.log("删除数据成功"),o&&o()}}}]),t}());o.a=d},wxAW:function(t,o,a){"use strict";o.__esModule=!0;var e,n=a("C4MV"),r=(e=n)&&e.__esModule?e:{default:e};o.default=function(){function t(t,o){for(var a=0;a<o.length;a++){var e=o[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),(0,r.default)(t,e.key,e)}}return function(o,a,e){return a&&t(o.prototype,a),e&&t(o,e),o}}()}});
//# sourceMappingURL=1.09341aefb8ef492323cb.js.map