{"version":3,"sources":["webpack:///src/views/Book.vue","webpack:///./src/views/Book.vue?58bd","webpack:///./src/views/Book.vue","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./src/views/Book.vue?35ed","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./src/util/reader.js","webpack:///./src/util/bookUtil.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./src/views/Book.vue?c0ad","webpack:///./src/util/bookDb2.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js"],"names":["ePub","window","Book","data","reader","title","books","id","name","author","content","page","menu","type","icon","click","this","add","href","target","mounted","init","destroyed","methods","document","getElementById","_this","util_reader","console","log","bookDb2","getBooks","$storage","get","set","addBookFromUrl","addLink","link","prompt","url","bookid","_this2","book","width","height","spreads","restore","getMetadata","then","meta","addBook","bookTitle","creator","remove","_this3","deleteBook","download","blob","navigator","msSaveOrOpenBlob","msSaveBlob","createElement","URL","createObjectURL","revokeObjectURL","fileChange","e","_this4","files","length","file","FileReader","onload","result","bookPath","Object","bookUtil","cover","Date","getTime","readAsArrayBuffer","views_Book","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_l","to","src","_e","_v","_s","on","$event","stopPropagation","preventDefault","staticStyle","display","label","change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","$Object","module","exports","it","key","desc","defineProperty","default","__esModule","i","locals","instance","Constructor","TypeError","Reader","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","getCoverURL","callback","coverUrl","blobUrl","xhr","XMLHttpRequest","responseType","recoveredBlob","response","readAsDataURL","open","send","d","$export","S","F","f","push","version","sources","names","mappings","sourcesContent","sourceRoot","g_store","db","BookDb","DB_NAME","OBJECT","cb","request","indexedDB","onerror","onsuccess","onupgradeneeded","createObjectStore","keyPath","autoIncrement","tx","transaction","objectStore","put","userName","age","delete","openCursor","cursor","value","continue","obj","_defineProperty","_defineProperty2","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype"],"mappings":"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","file":"static/js/1.22818bf182096092341b.js","sourcesContent":["<template>\n    <my-page class=\"page-home\" :title=\"title\" :page=\"page\">\n        <div id=\"main\">\n            <ul class=\"book-list\">\n                <li class=\"item\" v-for=\"book in books\">\n                    <router-link class=\"link\" :to=\"'/books/' + book.id\" :title=\"book.name\">\n                        <!-- <a class=\"remove\" href=\"#\" @click.stop.prevent=\"download(book)\">下载</a> -->\n                        <img class=\"cover\" :src=\"book.cover\" v-if=\"book.cover\" />\n                        <div class=\"cover-text\" v-if=\"!book.cover\">没有封面</div>\n                    </router-link>\n                    <div class=\"name\">{{ book.name }}</div>\n                    <a class=\"remove\" href=\"#\" @click.stop.prevent=\"remove(book)\">删除</a>\n                    <!-- <div class=\"author\">{{ book.author }}</div> -->\n                </li>\n            </ul>\n            <div class=\"empty-box\" v-if=\"!books.length\">\n                <img src=\"/static/img/empty.svg\"/>\n                <div class=\"text\">暂无书籍，你可以添加右上角的“+”添加书籍</div>\n            </div>\n            <ui-raised-button class=\"file-btn\" label=\"从文件中导入\" style=\"display: none\">\n                <input type=\"file\" id=\"file\" class=\"ui-file-button\" @change=\"fileChange($event, 1)\">\n            </ui-raised-button>\n        </div>\n    </my-page>\n</template>\n\n<script>\n    /* eslint-disable2 */\n    import bookDb from '../util/bookDb2'\n    import reader from '../util/reader'\n    import {getCoverURL} from '../util/bookUtil'\n    const ePub = window.ePub\n\n    export default {\n        data () {\n            return {\n                reader: null,\n                title: 'Acerkaio 的书架',\n                books: [\n                    {\n                        id: '1',\n                        name: '呵呵哒',\n                        author: '陈建行',\n                        content: '123'\n                    },\n                    {\n                        id: '2',\n                        name: '致我们即将逝去的青春',\n                        author: '陈建行',\n                        content: '123'\n                    }\n                ],\n                page: {\n                    menu: [\n                        {\n                            type: 'icon',\n                            icon: 'add',\n                            click: this.add,\n                            title: '添加本地书籍'\n                        },\n                        // {\n                        //     type: 'icon',\n                        //     icon: 'cloud_download',\n                        //     click: this.addLink,\n                        //     title: '添加云端书籍'\n                        // },\n                        {\n                            type: 'icon',\n                            icon: 'apps',\n                            href: 'https://blog.acerkaio.top/',\n                            target: '_blank',\n                            title: 'Acerkaio'\n                        }\n                    ]\n                }\n            }\n        },\n        mounted() {\n            this.init()\n        },\n        destroyed() {\n        },\n        methods: {\n            add() {\n                document.getElementById('file').click()\n            },\n            init() {\n                this.reader = reader\n                console.log('初始化')\n                bookDb.init(() => {\n                    bookDb.getBooks(data => {\n                        console.log('获取所有书籍')\n                        console.log(data)\n                        this.books = data\n                        // 添加示例图书\n                        let isInit = this.$storage.get('init', false)\n                        if (!isInit) {\n                            this.$storage.set('init', true)\n                            // this.addBookFromUrl('https://img1.yunser.com/epub/test.epub')\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/01安达与岛村.epub', 1)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/02安达与岛村.epub', 2)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/03安达与岛村.epub', 3)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/04安达与岛村.epub', 4)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/05安达与岛村.epub', 5)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/06安达与岛村.epub', 6)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/07安达与岛村.epub', 7)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/08安达与岛村.epub', 8)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/09安达与岛村.epub', 9)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/安达与岛村/10安达与岛村.epub', 10)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/%E5%AE%89%E8%BE%BE%E4%B8%8E%E5%B2%9B%E6%9D%91/%E7%9F%AD%E7%AF%87%20%E5%AE%89%E8%BE%BE%E4%B8%8E%E5%B2%9B%E6%9D%91.epub', 11)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/转生王和天才千金的魔法革命/01转生王和天才千金的魔法革命.epub', 12)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/转生王和天才千金的魔法革命/02转生王和天才千金的魔法革命.epub', 13)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/转生王和天才千金的魔法革命/03转生王和天才千金的魔法革命.epub', 14)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/转生王和天才千金的魔法革命/04转生王和天才千金的魔法革命.epub', 15)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/转生王和天才千金的魔法革命/05转生公主与天才千金的魔法革命.epub', 16)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/%E8%BD%AC%E7%94%9F%E7%8E%8B%E5%92%8C%E5%A4%A9%E6%89%8D%E5%8D%83%E9%87%91%E7%9A%84%E9%AD%94%E6%B3%95%E9%9D%A9%E5%91%BD/-%E7%AF%87%20%E8%BD%AC%E7%94%9F%E7%8E%8B%E5%92%8C%E5%A4%A9%E6%89%8D%E5%8D%83%E9%87%91%E7%9A%84%E9%AD%94%E6%B3%95%E9%9D%A9%E5%91%BD.epub', 17)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 01-tc.epub', 18)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 02-tc.epub', 19)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 03-tc.epub', 20)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 04-tc.epub', 21)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 05-tc.epub', 22)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 06-tc.epub', 23)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 07-tc.epub', 24)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 08-tc.epub', 25)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 09-tc.epub', 26)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 10-tc.epub', 27)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 11-tc.epub', 28)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 12-tc.epub', 29)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 13-tc.epub', 30)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 14-tc.epub', 31)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 15-tc.epub', 32)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 16-tc.epub', 33)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 17-tc.epub', 34)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 18-tc.epub', 35)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 19-tc.epub', 36)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 - 20-tc.epub', 37)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 短篇 - 01-tc.epub', 38)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔女之旅 番外 - 01-tc.epub', 39)\n                            this.addBookFromUrl('https://jsdelivr.pai233.top/gh/Acerkaio/apidata@main/maj/魔之旅 - 20.epub', 40)\n                        }\n                    })\n                })\n            },\n            addLink() {\n                let link = prompt('请输入链接')\n                console.log(link)\n                this.addBookFromUrl(link)\n            },\n            addBookFromUrl(url, bookid) {\n                this.book = ePub(url, {\n                    width: 400,\n                    height: 600,\n                    spreads: false,\n                    restore: true\n                })\n                this.book.getMetadata().then(meta => {\n                    console.log('getMetadata')\n                    console.log(meta)\n                    bookDb.init(() => {\n                        bookDb.addBook({\n                            type: 'link',\n                            id: '' + bookid,\n                            name: meta.bookTitle,\n                            author: meta.creator,\n                            content: url\n                        }, () => {\n                            bookDb.getBooks(data => {\n                                console.log('获取所有书籍')\n                                this.books = data\n                                console.log(data)\n                            })\n                        })\n                    })\n                })\n            },\n            remove(book) {\n                bookDb.init(() => {\n                    bookDb.deleteBook(book.id, data => {\n                        bookDb.getBooks(data => {\n                            console.log('获取所有书籍')\n                            console.log(data)\n                            this.books = data\n                        })\n                    })\n                })\n            },\n            download(book) {\n                let fileName = 'dl.epub'\n                let blob = book.content\n                if (window.navigator.msSaveOrOpenBlob) {\n                    navigator.msSaveBlob(blob, fileName)\n                } else {\n                    var link = document.createElement('a')\n                    link.href = window.URL.createObjectURL(blob)\n                    link.download = fileName\n                    link.click()\n                    window.URL.revokeObjectURL(link.href)\n                }\n            },\n            fileChange(e) {\n                let files = e.target.files\n                if (!files.length) {\n                    return\n                }\n                let file = e.target.files[0]\n//                if (left === 1) {\n//                    var f_name = file.name\n//                    var f_type = f_name.substring(f_name.lastIndexOf(\".\"))\n//                }\n                console.log(file.name)\n                let reader = new FileReader()\n                reader.onload = e => {\n                    let content = e.target.result\n                    this.book = ePub({\n                        bookPath: content,\n                        restore: false\n                    })\n                    this.book.getMetadata().then(meta => {\n                        this.meta = meta\n                        console.log('getMetadata')\n                        console.log(meta)\n                        getCoverURL(this.book, cover => {\n                            console.log('首页封面')\n                            console.log(cover)\n                            bookDb.init(() => {\n                                bookDb.addBook({\n                                    id: '' + new Date().getTime(),\n                                    name: meta.bookTitle,\n                                    author: meta.creator,\n                                    content: content,\n                                    cover: cover\n                                }, () => {\n                                    bookDb.getBooks(data => {\n                                        console.log('获取所有书籍')\n                                        this.books = data\n                                        console.log(data)\n                                    })\n                                })\n                            })\n                        })\n                    })\n                }\n                reader.readAsArrayBuffer(file)\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    @import \"../scss/var\";\n\n    @keyframes rotate {\n        to { transform: rotate(360deg); }\n    }\n\n    .book-list{\n        @include clearfix;\n        .item {\n            position: relative;\n            float: left;\n            width: 140px;\n            height: 196px;\n            margin-right: 16px;\n            margin-bottom: 76px;\n            background-color: #fff;\n            /*background-image: url(\"/static/img/bg_1.jpg\");*/\n            box-shadow: 0 1px 6px rgba(0,0,0,.117647), 0 1px 4px rgba(0,0,0,.117647);\n            &:hover {\n                // .remove {\n                //     display: block;\n                // }\n            }\n        }\n        .link {\n            display: block;\n            height: 100%;\n            // padding: 16px;\n            margin-bottom: 16px;\n            color: inherit;\n        }\n        .name {\n            // font-weight: bold;\n        }\n        .cover {\n            max-width: 100%;\n        }\n        .cover-text {\n            line-height: 196px;\n            text-align: center;\n            color: #999;\n        }\n        .author {\n            position: absolute;\n            bottom: 16px;\n            left: 16px;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n        }\n        .remove {\n            display: none;\n        }\n    }\n    .empty-box {\n        width: 480px;\n        margin: 80px auto;\n        padding: 32px;\n        text-align: center;\n        background-color: #fff;\n        box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, .12);\n        img {\n            margin-bottom: 16px;\n            width: 100px;\n            animation: rotate 5s infinite linear;\n        }\n        .text {\n            color: #999;\n        }\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Book.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('my-page',{staticClass:\"page-home\",attrs:{\"title\":_vm.title,\"page\":_vm.page}},[_c('div',{attrs:{\"id\":\"main\"}},[_c('ul',{staticClass:\"book-list\"},_vm._l((_vm.books),function(book){return _c('li',{staticClass:\"item\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/books/' + book.id,\"title\":book.name}},[(book.cover)?_c('img',{staticClass:\"cover\",attrs:{\"src\":book.cover}}):_vm._e(),_vm._v(\" \"),(!book.cover)?_c('div',{staticClass:\"cover-text\"},[_vm._v(\"没有封面\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(book.name))]),_vm._v(\" \"),_c('a',{staticClass:\"remove\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.remove(book)}}},[_vm._v(\"删除\")])],1)}),0),_vm._v(\" \"),(!_vm.books.length)?_c('div',{staticClass:\"empty-box\"},[_c('img',{attrs:{\"src\":\"/static/img/empty.svg\"}}),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_vm._v(\"暂无书籍，你可以添加右上角的“+”添加书籍\")])]):_vm._e(),_vm._v(\" \"),_c('ui-raised-button',{staticClass:\"file-btn\",staticStyle:{\"display\":\"none\"},attrs:{\"label\":\"从文件中导入\"}},[_c('input',{staticClass:\"ui-file-button\",attrs:{\"type\":\"file\",\"id\":\"file\"},on:{\"change\":function($event){return _vm.fileChange($event, 1)}}})])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b98643ac\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Book.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b98643ac\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Book.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Book.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Book.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b98643ac\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Book.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b98643ac\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Book.vue\n// module id = null\n// module chunks = ","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 9bBU\n// module chunks = 0 1","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = C4MV\n// module chunks = 0 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b98643ac\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Book.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"b90099ae\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-b98643ac\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/Book.vue\n// module id = FUKB\n// module chunks = 1","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = Zrlr\n// module chunks = 0 1","/* eslint-disable */\n\nclass Reader {\n    constructor() {\n\n    }\n}\n\nexport default Reader\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/reader.js","/* eslint-disable */\n\nfunction getCoverURL(book, callback) {\n    book.coverUrl().then(function (blobUrl) {\n        var xhr = new XMLHttpRequest();\n        xhr.responseType = 'blob';\n        xhr.onload = function () {\n            var recoveredBlob = xhr.response;\n            var reader = new FileReader();\n            reader.onload = function () {\n                callback && callback(reader.result);\n            };\n            reader.readAsDataURL(recoveredBlob);\n        };\n        xhr.open('GET', blobUrl);\n        xhr.send();\n    });\n}\n\nexport {getCoverURL}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/bookUtil.js","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = mClu\n// module chunks = 0 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n@-webkit-keyframes rotate-data-v-b98643ac {\\nto {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n}\\n}\\n@keyframes rotate-data-v-b98643ac {\\nto {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n}\\n}\\n.book-list[data-v-b98643ac]:after {\\n  clear: both;\\n  content: '.';\\n  display: block;\\n  height: 0;\\n  line-height: 0;\\n  overflow: hidden;\\n}\\n.book-list .item[data-v-b98643ac] {\\n  position: relative;\\n  float: left;\\n  width: 140px;\\n  height: 196px;\\n  margin-right: 16px;\\n  margin-bottom: 76px;\\n  background-color: #fff;\\n  /*background-image: url(\\\"/static/img/bg_1.jpg\\\");*/\\n  -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\\n          box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\\n}\\n.book-list .link[data-v-b98643ac] {\\n  display: block;\\n  height: 100%;\\n  margin-bottom: 16px;\\n  color: inherit;\\n}\\n.book-list .cover[data-v-b98643ac] {\\n  max-width: 100%;\\n}\\n.book-list .cover-text[data-v-b98643ac] {\\n  line-height: 196px;\\n  text-align: center;\\n  color: #999;\\n}\\n.book-list .author[data-v-b98643ac] {\\n  position: absolute;\\n  bottom: 16px;\\n  left: 16px;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n.book-list .remove[data-v-b98643ac] {\\n  display: none;\\n}\\n.empty-box[data-v-b98643ac] {\\n  width: 480px;\\n  margin: 80px auto;\\n  padding: 32px;\\n  text-align: center;\\n  background-color: #fff;\\n  -webkit-box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\\n          box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\\n}\\n.empty-box img[data-v-b98643ac] {\\n    margin-bottom: 16px;\\n    width: 100px;\\n    -webkit-animation: rotate-data-v-b98643ac 5s infinite linear;\\n            animation: rotate-data-v-b98643ac 5s infinite linear;\\n}\\n.empty-box .text[data-v-b98643ac] {\\n    color: #999;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/home/acerkaio/桌面/书架/epub-front/src/views/Book.vue\"],\"names\":[],\"mappings\":\";AACA;AACA;IACI,kCAAkC;YAC1B,0BAA0B;CACrC;CACA;AACD;AACA;IACI,kCAAkC;YAC1B,0BAA0B;CACrC;CACA;AACD;EACE,YAAY;EACZ,aAAa;EACb,eAAe;EACf,UAAU;EACV,eAAe;EACf,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,YAAY;EACZ,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,oBAAoB;EACpB,uBAAuB;EACvB,kDAAkD;EAClD,yFAAyF;UACjF,iFAAiF;CAC1F;AACD;EACE,eAAe;EACf,aAAa;EACb,oBAAoB;EACpB,eAAe;CAChB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,mBAAmB;EACnB,mBAAmB;EACnB,YAAY;CACb;AACD;EACE,mBAAmB;EACnB,aAAa;EACb,WAAW;EACX,oBAAoB;EACpB,iBAAiB;EACjB,wBAAwB;CACzB;AACD;EACE,cAAc;CACf;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,sDAAsD;UAC9C,8CAA8C;CACvD;AACD;IACI,oBAAoB;IACpB,aAAa;IACb,6DAA6D;YACrD,qDAAqD;CAChE;AACD;IACI,YAAY;CACf\",\"file\":\"Book.vue\",\"sourcesContent\":[\"\\n@-webkit-keyframes rotate-data-v-b98643ac {\\nto {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n}\\n}\\n@keyframes rotate-data-v-b98643ac {\\nto {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n}\\n}\\n.book-list[data-v-b98643ac]:after {\\n  clear: both;\\n  content: '.';\\n  display: block;\\n  height: 0;\\n  line-height: 0;\\n  overflow: hidden;\\n}\\n.book-list .item[data-v-b98643ac] {\\n  position: relative;\\n  float: left;\\n  width: 140px;\\n  height: 196px;\\n  margin-right: 16px;\\n  margin-bottom: 76px;\\n  background-color: #fff;\\n  /*background-image: url(\\\"/static/img/bg_1.jpg\\\");*/\\n  -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\\n          box-shadow: 0 1px 6px rgba(0, 0, 0, 0.117647), 0 1px 4px rgba(0, 0, 0, 0.117647);\\n}\\n.book-list .link[data-v-b98643ac] {\\n  display: block;\\n  height: 100%;\\n  margin-bottom: 16px;\\n  color: inherit;\\n}\\n.book-list .cover[data-v-b98643ac] {\\n  max-width: 100%;\\n}\\n.book-list .cover-text[data-v-b98643ac] {\\n  line-height: 196px;\\n  text-align: center;\\n  color: #999;\\n}\\n.book-list .author[data-v-b98643ac] {\\n  position: absolute;\\n  bottom: 16px;\\n  left: 16px;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n.book-list .remove[data-v-b98643ac] {\\n  display: none;\\n}\\n.empty-box[data-v-b98643ac] {\\n  width: 480px;\\n  margin: 80px auto;\\n  padding: 32px;\\n  text-align: center;\\n  background-color: #fff;\\n  -webkit-box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\\n          box-shadow: 0 0.5px 1px 0 rgba(0, 0, 0, 0.12);\\n}\\n.empty-box img[data-v-b98643ac] {\\n    margin-bottom: 16px;\\n    width: 100px;\\n    -webkit-animation: rotate-data-v-b98643ac 5s infinite linear;\\n            animation: rotate-data-v-b98643ac 5s infinite linear;\\n}\\n.empty-box .text[data-v-b98643ac] {\\n    color: #999;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-b98643ac\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/Book.vue\n// module id = qexZ\n// module chunks = 1","/* eslint-disable */\n\nlet g_store\n\nclass BookDb {\n\n    constructor() {\n        this.DB_NAME = 'dbName'\n        this.OBJECT = 'Book'\n    }\n\n    init(cb) {\n        var request = indexedDB.open('dbName3', 1);  // 打开 dbName 数据库\n        request.onerror = function(e){              // 监听连接数据库失败时执行\n            console.log('连接数据库失败');\n        }\n        request.onsuccess = function(e){            // 监听连接数据库成功时执行\n            console.log('连接数据库成功');\n        }\n\n        request.onupgradeneeded = e => {\n            var db = e.target.result;\n            db.createObjectStore(this.OBJECT, {keyPath: 'id', autoIncrement: false});\n            console.log('创建对象仓库成功');\n        }\n\n        request.onsuccess = e => {\n            var db = e.target.result;\n            var tx = db.transaction(this.OBJECT,'readwrite');\n            g_store = tx.objectStore(this.OBJECT);\n            cb && cb()\n        }\n    }\n\n    init2() {\n        var value = {\n            'id': '2',\n            'userName': 'asd',\n            'age': 24\n        }\n        var req1 = g_store.put(value);        // 保存数据\n\n        var req2 = g_store.get('2');            // 获取索引userId为1的数据\n        req2.onsuccess = function(){\n            // console.log(this.result);    // linxin\n        }\n\n        var req3 = g_store.delete('2');             // 删除索引为1的数据\n        req3.onsuccess = function(){\n            console.log('删除数据成功');        // 删除数据成功\n        }\n    }\n\n    getBooks(cb) {\n        var req = g_store.openCursor();\n        var result = [];\n\n        req.onsuccess = function (e) {\n            var cursor = e.target.result;\n            if (cursor) {\n                result.push(cursor.value);\n                cursor.continue();\n            } else {\n                cb && cb(result)\n            }\n        }\n    }\n\n    getBook(id, cb) {\n        let req = g_store.get(id)\n        req.onsuccess = e => {\n            console.log('getBook')\n            // console.log(e.target.result)\n            cb && cb(e.target.result)\n        }\n    }\n\n    addBook(book, cb) {\n        let req = g_store.put(book)\n        req.onsuccess = () => {\n            console.log('保存成功')\n            cb && cb()\n        }\n    }\n\n    deleteBook(id, cb) {\n        let req = g_store.delete(id)\n        req.onsuccess = () => {\n            console.log('删除数据成功')\n            cb && cb()\n        }\n    }\n}\n\nlet db = new BookDb()\n\nexport default db\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/bookDb2.js","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = wxAW\n// module chunks = 0 1"],"sourceRoot":""}